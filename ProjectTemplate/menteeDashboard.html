<!DOCTYPE html>
<html>

   <head>
      <title>Mentee Dashboard</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
  
      </head>
     
     <link rel="stylesheet" href="style1.css">
     <link rel="stylesheet" href="style2.css">
     <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <style>
        html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
      </style>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script>
        function LogOff() {

          var webMethod = "ProjectServices.asmx/LogOff";
          $.ajax({
            type: "POST",
            url: webMethod,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
              if (msg.d) {
                //we logged off, so go back to logon page,
                //stop checking messages
                //and clear the chat panel
                window.open('index.html', '_self')
                
              } else {
                alert('logout failed')
              }
            },
            error: function (e) {
              alert("boo...");
            }
          });
        }
        
      </script>
   </head>


<body class="w3-light-grey">

    <!-- Navbar -->
    <div class="w3-top">
      <div class="w3-bar w3-theme-d2 w3-left-align w3-large">
        <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-theme-d2"
          href="javascript:void(0);" onclick="openNav()"><i class="fa fa-bars"></i></a>
        <a href="dashboard.html" class="w3-bar-item w3-button w3-padding-large w3-theme-d4"><i
            class="fa fa-home w3-margin-right"></i>Logo</a>
        <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="News"><i
            class="fa fa-globe"></i></a>
        <a href="profile.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white"
          title="Account Settings"><i class="fa fa-user"></i></a>
        <a href="#" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white" title="Messages"><i
            class="fa fa-envelope"></i></a>
        <div class="w3-dropdown-hover w3-hide-small">
          <button class="w3-button w3-padding-large" title="Notifications"><i class="fa fa-bell"></i><span
              class="w3-badge w3-right w3-small w3-green">3</span></button>
          <div class="w3-dropdown-content w3-card-4 w3-bar-block" style="width:300px">
            <a href="#" class="w3-bar-item w3-button">One new friend request</a>
            <a href="#" class="w3-bar-item w3-button">John Doe posted on your wall</a>
            <a href="#" class="w3-bar-item w3-button">Jane likes your post</a>
          </div>
        </div>
        <a href="#" class="w3-bar-item w3-button w3-hide-small w3-right w3-padding-large w3-hover-white"
          title="My Account">
          <img src="ProfilePic.png" class="w3-circle" style="height:23px;width:23px" alt="Avatar">
        </a>
        <a href="#" class="w3-bar-item w3-button w3-right w3-padding-large w3-hover-white" onclick="LogOff">Logout</a>

      </div>
    </div>

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
      <div class="w3-container w3-row">
        <div class="w3-col s4">
          <img src="/w3images/avatar2.png" class="w3-circle w3-margin-right" style="width:46px">
        </div>
        <div class="w3-col s8 w3-bar">
          <span>Welcome, <strong>Mike</strong></span><br>
          <a href="#" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i></a>
          <a href="profile.html" class="w3-bar-item w3-button"><i class="fa fa-user"></i></a>
          <a href="#" class="w3-bar-item w3-button"><i class="fa fa-cog"></i></a>
        </div>
      </div>
      <hr>
      <div class="w3-container">
        <h5>My Quests</h5>
      </div>
      <div class="w3-bar-block">
        <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black"
          onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>
        <!-- TODO: change onclick function being called -->
        <!-- TODO: Set up javascript to change HTML for Quest names -->
        <button id="quest1button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 1</button>
        <button id="quest2button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 2</button>
        <button id="quest3button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 3</button>
        <button id="quest4button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 4</button>
        <button id="quest5button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 5</button>
        <button id="quest6button" style="visibility:hidden" class="w3-bar-item w3-button w3-padding w3-blue"><i
            class="fa fa-users fa-fw" onclick="getQuest()"></i>  Quest 6</button>
      </div>
    </nav>


    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer"
      title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:300px;margin-top:40x;">

      <!-- Header -->
      <header class="w3-container" style="padding-top:20px">
        <h5><b><i class="fa fa-dashboard"></i>My Dashboard</b></h5>
      </header>

      <hr>
      <div class="w3-container">
        <h5>Course Progress</h5>
        <p>New Visitors</p>
        <div class="w3-grey">
          <div id="progressBar" class="w3-container w3-center w3-padding w3-green" style="width:0%">0%</div>
        </div>
      </div>
      <hr>

      <!-- Course Checkpoint Template -->
      <div class="w3-container">
        <form>
          <h5>Course List</h5>
          <table id="cpList" class="w3-table w3-striped w3-bordered w3-border w3-hoverable w3-white">
            <tr id="tr1">
              <td><input type="checkbox" id="checkpoint1" onclick="updateBar()">
                <label for="checkpoint1" id="check1label">&nbsp;Checkpoint 1</label>
              </td>
            </tr>
            <tr id="tr2">
              <td><input type="checkbox" id="checkpoint2" onclick="updateBar()">
                <label for="checkpoint2" id="check2label">&nbsp;Checkpoint 2</label>
              </td>
            </tr>
            <tr id="tr3">
              <td><input type="checkbox" id="checkpoint3" onclick="updateBar()">
                <label for="checkpoint3" id="check3label">&nbsp;Checkpoint 3</label>
              </td>
            </tr>
            <tr id="tr4">
              <td><input type="checkbox" id="checkpoint4" onclick="updateBar()">
                <label for="checkpoint4" id="check4label">&nbsp;Checkpoint 4</label>
              </td>
            </tr>
            <tr id="tr5">
              <td><input type="checkbox" id="checkpoint5" onclick="updateBar()">
                <label for="checkpoint5" id="check5label">&nbsp;Checkpoint 5</label>
              </td>
            </tr>
          </table><br>
          <button class="button" id="submitButton" type="submit">Save Progress</button>
        </form>
        <br>
      </div>
      <hr>
      <div class="w3-container">
        <h5>About this course</h5>
        <ul class="w3-ul w3-card-4 w3-white">
          <li class="w3-padding-16">
            <img src="ProfilePic.png" class="w3-left w3-circle w3-margin-right" style="width:35px">
            <span class="w3-xlarge" id="courseMentor">Mike</span><br>
          </li>
          <li class="w3-padding-16">
            <span id="courseDescription">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Totam nobis illum fuga necessitatibus vitae
              cupiditate odit, tenetur nam similique? Fugiat ducimus harum doloribus sapiente ipsum numquam aperiam, nam
              totam temporibus?</span>
          </li>
        </ul>
      </div>
      <hr>

    </div>

    <script>
      // Get the Sidebar
      var mySidebar = document.getElementById("mySidebar");

      // Get the DIV with overlay effect
      var overlayBg = document.getElementById("myOverlay");

      // Toggle between showing and hiding the sidebar, and add overlay effect
      function w3_open() {
        if (mySidebar.style.display === 'block') {
          mySidebar.style.display = 'none';
          overlayBg.style.display = "none";
        } else {
          mySidebar.style.display = 'block';
          overlayBg.style.display = "block";
        }
      }

      // Close the sidebar with the close button
      function w3_close() {
        mySidebar.style.display = "none";
        overlayBg.style.display = "none";
      }


      function updateBar() {
        // const tbody = document.getElementById("checkpoints").children[0];
        // const inputs = tbody.querySelectorAll("input")
        // console.log(inputs)
        const checkpoints = document.querySelectorAll("[id^='checkpoint']")
        let complete = 0
        let total = checkpoints.length
        console.log(checkpoints)

        for (let i = 0; i < checkpoints.length; i++) {
          console.log(checkpoints[i].checked)
          if (checkpoints[i].checked)
            complete += 1
        }
        let percentComplete = String((complete / total).toFixed(2) * 100) + '%'
        console.log(complete)
        console.log(percentComplete)
        let pBar = document.getElementById("progressBar")
        pBar.style = "width:" + percentComplete
        pBar.innerHTML = percentComplete

        // FOR EACH function to be used later :)
        // checkpoints.forEach(checkChecked)
      }


// function checkChecked(element) {
//   console.log(element.checked)
// }


    </script>

  </body>

</html>