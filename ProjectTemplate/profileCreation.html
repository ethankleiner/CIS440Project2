<!-- come to this page after initial request account, and potentially to update profile -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Profile</title>
    <!-- script - need to redirect to profile pic upload page -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

		//resets the new profile inputs
		function clearProfile() {
			$('#profileFname').val("");
			$('#profileLname').val("");
			$('#profileBday').val();
			$('#profilePhone').val();
            $('#profileCompany').val("");
			$('#profilePosition').val("");
            $('#profileYears').val();
            $('#pythonCheck').checked = false;
            $('#javaCheck').checked = false;
            $('#sqlCheck').checked = false;
			$('#profileBio').val("");
		}

		//passes account info to the server, to create an account request
		function CreateProfile(fname, lname, bday, phone, comp, pos, years, python=false, java=false, sql=false, bio) {

			var skillList = document.getElementsByName('skill');

			for (i = 0; i < skillList.length; i++) {
				if (skillList[i].checked){
                    if (skillList[i] == 1){
                        python = true;
                    } else if (skillList[i] == 2){
                        java = true;
                    } else {
                        sql = true;
                    }
                }
			}

            var webMethod = "ProjectServices.asmx/CreateProfile";
            var parameters = "{\"fname\":\"" + encodeURI(fname) + "\",\"lname\":\"" + encodeURI(lname) 
                + "\",\"bday\":\"" + encodeURI(bday) + "\",\"phone\":\"" + encodeURI(phone)+ "\",\"comp\":\"" + encodeURI(comp)
                + "\",\"years\":\"" + encodeURI(years) + "\",\"pos\":\"" + encodeURI(pos) + "\", \"bio\":\"" + encodeURI(bio) 
                + "\, \"python\":\"" + encodeURI(python) + "\",\"java\":\"" + encodeURI(java) + "\",\"sql\":\"" + encodeURI(sql) + "\"}";

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    // window.open('profilePictureUpload.aspx', '_self')
                    clearProfile();
                    alert("Profile Added!");
                },
                error: function (e) {
                    console.log('Added profile failed...')
                    alert("boo...");
                }
            })
        };

	</script>
</head>

<body>
    <h1>Profile Settings</h1>
    <form onsubmit="CreateProfile($('#profileFname').val(), $('#profileLname').val(), $('#profileBday').val(),
    $('#profilePhone').val(), $('#profileCompany').val(), $('#profilePosition').val(), $('#profileYears').val(),
    $('#profileBio').val()); return false;">
        
        <section>
            <label>First Name</label><br />
            <input type="text" class="textInput" id="profileFname" name="fName" required /><br /><br />
        </section>

        <section>
            <label>Last Name</label><br />
            <input type="text" class="textInput" id="profileLname" name="lName" required /><br /><br />
        </section>

        <section>
            <label>Birthday</label><br>
            <input type="date" id="profileBday" name="bday" required><br><br>
        </section>

        <section>
            <label>Phone Number (format: 123-456-7890)</label><br />
            <input type="tel" class="textInput" id="profilePhone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" name="phone"
                required /><br /><br />
        </section>

        <section>
            <label>Company</label><br />
            <input type="text" type="text" class="textInput" id="profileCompany" name="company" required /><br /><br />
        </section>

        <section>
            <label>Position</label><br />
            <input type="text" class="textInput" id="profilePosition" required /><br /><br />
        </section>

        <section>
            <label>Years Experience</label><br />
            <input type="number" step="1" min="0" max="70" id="profileYears" required /><br /><br />
        </section>


        <section id="skillListSection">
            <span id="skillPrompt">Relevant Interests</span><br>
            <input value=1 name='skill' id="pythonCheck" type="checkbox">
            <label id="pythonLabel" for="pythonCheck">Python</label><br>
            <input value=2 name='skill' id="javaCheck" type="checkbox">
            <label id="javaLabel" for="javaCheck">Java</label><br>
            <input value=3 name='skill' id="sqlCheck" type="checkbox">
            <label id="sqlLabel" for="sqlCheck">SQL</label><br>
        </section><br>


        <section id="bio">
            <label>Profile Bio</label><br />
            <input type="text" class="textInput" id="profileBio" name="bio" required /><br /><br />
        </section>

        <section id="buttons">
            <button type="reset" class="button" onclick="clearProfile()">Clear</button>
            <button class="button" id="submitButton" type="submit">Next</button>
        </section>

    </form>

</body>

</html>